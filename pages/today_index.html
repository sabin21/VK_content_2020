<!DOCTYPE html>
<html lang="en">
<head>
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Visit Korea</title>
  <meta charset="utf-8">

  <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0 user-scalable=no">
  <link rel="shortcut icon" type="image/x-icon" href="../favicon.ico" />
  <link rel="stylesheet" type="text/css" href="../libs/styles/common.css" />
  <link rel="stylesheet" type="text/css" href="../libs/styles/vk_theme_common.css">
  <link rel="stylesheet" type="text/css" href="../libs/styles/today.css" />
</head>

<body>
	
    <div class="sub-header">
        <a class="btn-back" href="theme_index.html">
            <svg width="38px" height="38px" viewBox="0 0 38 38" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                <g id="Artboard" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" stroke-linecap="round">
                    <g id="Group-3" transform="translate(2.000000, 8.000000)" stroke="#404040" stroke-width="1.5">
                        <polyline id="Path" transform="translate(6.000000, 11.500000) rotate(-90.000000) translate(-6.000000, -11.500000) " points="-5 17 6 6 17 17"></polyline>
                        <line x1="1" y1="11.5" x2="31" y2="11.5" id="Line-2"></line>
                    </g>
                </g>
            </svg>
        </a>
        <p class="campaign-title">Inssa Korea</p>
        <a class="btn-share">
            <svg width="38px" height="38px" viewBox="0 0 38 38" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                <g id="Artboard-Copy-7" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                    <g id="Group-8" transform="translate(6.000000, 4.000000)" stroke="#121314" stroke-width="1.4">
                        <path d="M19,11 C20.6041667,11 21.9375,11 23,11 C24.6568542,11 26,12.3431458 26,14 L26,26 C26,27.6568542 24.6568542,29 23,29 L3,29 C1.34314575,29 0,27.6568542 0,26 L0,14 C0,12.3431458 1.34314575,11 3,11 L7,11" id="Path"></path>
                        <polyline id="Path" stroke-linejoin="round" points="7 6 13 -3.19744231e-14 19 6"></polyline>
                        <path d="M13,21 L13,1" id="Path"></path>
                    </g>
                </g>
            </svg>
        </a>
    </div>

    <div class="wrapper">

    <header class="header" data-active="1">
        <div class="header__left">
        <div class="number">
            <div class="slide" data-slide="1"></div>
            <div class="slide" data-slide="2"></div>
            <div class="slide" data-slide="3"></div>
            <div class="slide" data-slide="4"></div>
        </div>
        <div class="title">
            <div class="slide" data-slide="1">
            <div class="title__super">Curisine & Wine</div>
            <div class="title__big">
                <span>J</span><span>e</span><span>o</span><span>n</span><span>j</span><span>u</span>
                <span>M</span><span>a</span><span>k</span><span>g</span><span>e</span><span>o</span><span>l</span><span>l</span><span>i</span>
            </div>
            </div>
            <div class="slide" data-slide="2">
                <div class="title__super">Curisine & Wine</div>
                <div class="title__big">
                    <span>J</span><span>e</span><span>o</span><span>n</span><span>j</span><span>u</span>
                    <span>M</span><span>a</span><span>k</span><span>g</span><span>e</span><span>o</span><span>l</span><span>l</span><span>i</span>
                </div>
            </div>
            <div class="slide" data-slide="3">
                <div class="title__super">Curisine & Wine</div>
                <div class="title__big">
                    <span>J</span><span>e</span><span>o</span><span>n</span><span>j</span><span>u</span>
                    <span>M</span><span>a</span><span>k</span><span>g</span><span>e</span><span>o</span><span>l</span><span>l</span><span>i</span>
                </div>
            </div>
            <div class="slide" data-slide="4">
                <div class="title__super">Curisine & Wine</div>
                <div class="title__big">
                    <span>J</span><span>e</span><span>o</span><span>n</span><span>j</span><span>u</span>
                    <span>M</span><span>a</span><span>k</span><span>g</span><span>e</span><span>o</span><span>l</span><span>l</span><span>i</span>
                </div>
            </div>
        </div>
        <div class="content">
            <div class="slide" data-slide="1">
                <div class="content__blurb">
                    It is a Makgeolli house in an alley of Jeonju Market. On a rainy day, 
                    Koreans think of 'pajeon makgeolli in rice wine'. I'll be waiting.
                </div>
                <a class="content__link">View<span> Detail</span></a>
            </div>
            <div class="slide" data-slide="2">
                <div class="content__blurb">
                    It is a Makgeolli house in an alley of Jeonju Market. On a rainy day, 
                    Koreans think of 'pajeon makgeolli in rice wine'. I'll be waiting.
                </div>
                <a class="content__link">View<span> Detail</span></a>
            </div>
            <div class="slide" data-slide="3">
                <div class="content__blurb">
                    It is a Makgeolli house in an alley of Jeonju Market. On a rainy day, 
                    Koreans think of 'pajeon makgeolli in rice wine'. I'll be waiting.
                </div>
                <a class="content__link">View<span> Detail</span></a>
            </div>
            <div class="slide" data-slide="4">
                <div class="content__blurb">
                    It is a Makgeolli house in an alley of Jeonju Market. On a rainy day, 
                    Koreans think of 'pajeon makgeolli in rice wine'. I'll be waiting.
                </div>
                <a class="content__link">View<span> Detail</span></a>
            </div>
        </div>
        </div>
        <div class="header__right">
        <div class="video">
            <div class="video__left">
            <div class="slide" data-slide="1">
                <video class="video__one" src="../video/jeonju_final.mp4" muted loop></video>
            </div>
            <div class="slide" data-slide="2">
                <video class="video__one" src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/908370/swan.mp4" muted loop></video>
            </div>
            <div class="slide" data-slide="3">
                <video class="video__one" src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/908370/jungle.mp4" muted loop></video>
            </div>
            <div class="slide" data-slide="4">
                <video class="video__one" src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/908370/jelly.mp4" muted loop></video>
            </div>
            </div>
            
        </div>
        <div class="controls">
            <div class="controls__prev"></div>
            <div class="controls__indicator"><span>1</span> / 4</div>
            <div class="controls__next"></div>
        </div>
        </div>
    </header>

    <div class="contents-wrap">
        <img src="../img/today_content_1.png" style="max-width:100%; margin: 80px 0">
    </div>

</div><!-- wrapper end -->




<script src="../libs/jquery/jquery-3.4.1.min.js"></script>
<script src="../libs/gsap/gsap.min.js"></script>
<script src="../libs/threejs/three.min.js"></script>
<script src="../libs/aos/aos.js"></script>

<script>
    $(document).ready(init);

    var active = 0;
    var count = 4;

    function init(){
        $('video')[0].addEventListener('loadeddata', function(){
            $('.controls__next').click(nextSlide);
            $('.controls__prev').click(prevSlide);
            $('.content__link').click(reEnter);	
            $('body').addClass('is-loaded');
            setTimeout(function(){
                goToSlide(1);	
            },300);
        })
    }

    function nextSlide(){
        var next = active + 1;
        if (next > count){
            next = 1;
        }
        goToSlide(next);
    }

    function prevSlide(){
        prev = active - 1;
        if (prev < 1 ){
            prev = count;
        }
        goToSlide(prev);
    }

    function goToSlide(number){
        $('.slide').removeClass('was-active');
        $('.slide[data-slide='+active+']').addClass('was-active');
        stopVideo($('.slide.is-active'));
        active = number;
        $('.slide').removeClass('is-active');
        startVideo($('.slide[data-slide='+number+']'));
        setTimeout(function(){
            $('.slide[data-slide='+number+']').addClass('is-active');	
        },10)
        $('.controls__indicator span').html(active);
        $('.header').attr('data-active', active);
    }

    function stopVideo($slide){
        withVideo($slide.find('video'),function(video){ 
            video.pause();
        })
    }

    function startVideo($slide){
        initVideos($slide.find('.video__one'), $slide.find('.video__two'), $slide);
    }

    function initVideos($primary, $slide){
        //withVideo($secondary,function(video){ 
        //	video.currentTime = 0;
        //	video.style.zIndex = 0;
        //	video.style.display = 'none';
        //})	
        withVideo($primary,function(video){ 
            video.currentTime = 0;
            video.style.zIndex = 1;
            video.style.display = 'block';
            video.play();	
            var loop = setTimeout(function(){
                if ($slide.hasClass('is-active')){
                    fadeVideos($primary, $slide);
                } else {
                    console.log('didnt loop')
                }
                clearTimeout(loop);
            }, 7000);
        })
    }


    function fadeVideos($primary, $slide){
        //withVideo($secondary,function(video){ 
        //	video.style.zIndex = 1;
        //	$(video).fadeOut(1000);
        //})	
        withVideo($primary,function(video){ 
            video.currentTime = 0;
            video.style.zIndex = 0;
            video.style.display = 'block';
            video.play();
            var loop = setTimeout(function(){
                if ($slide.hasClass('is-active')){
                    fadeVideos($primary, $slide);
                } else {
                    console.log('didnt loop')
                }
                clearTimeout(loop);
            }, 7000);
        })
    }

    function withVideo($selector, callback){
        $selector.each(function(index, video){
            callback(video);
        })
    }

    function reEnter(){
        $('body').removeClass('is-loaded');
        goToSlide(4);
        setTimeout(function(){
            goToSlide(1);
            $('body').addClass('is-loaded');
        }, 2000);
    }
</script>
  
</body>

  
</html>